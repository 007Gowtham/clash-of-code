{
    "info": {
        "_postman_id": "user-function-submission-api",
        "name": "User Function Submission API",
        "description": "API endpoints for submitting user function code (solution only) for code execution",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "// Save the token from response",
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    if (jsonData.data && jsonData.data.token) {",
                                    "        pm.environment.set(\"auth_token\", jsonData.data.token);",
                                    "        console.log(\"Token saved:\", jsonData.data.token);",
                                    "    }",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "login"
                            ]
                        },
                        "description": "Login to get authentication token"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "User Function Submission",
            "item": [
                {
                    "name": "Run User Function (Python - Two Sum)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"userFunctionCode\": \"def twoSum(nums, target):\\n    # Brute force solution\\n    for i in range(len(nums)):\\n        for j in range(i + 1, len(nums)):\\n            if nums[i] + nums[j] == target:\\n                return [i, j]\\n    return []\",\n  \"language\": \"python\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/submissions/run-function/{{question_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "submissions",
                                "run-function",
                                "{{question_id}}"
                            ]
                        },
                        "description": "Run user function code against sample test cases only (Python example)"
                    },
                    "response": []
                },
                {
                    "name": "Run User Function (JavaScript - Two Sum)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"userFunctionCode\": \"function twoSum(nums, target) {\\n    // Hash map solution\\n    const map = new Map();\\n    for (let i = 0; i < nums.length; i++) {\\n        const complement = target - nums[i];\\n        if (map.has(complement)) {\\n            return [map.get(complement), i];\\n        }\\n        map.set(nums[i], i);\\n    }\\n    return [];\\n}\",\n  \"language\": \"javascript\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/submissions/run-function/{{question_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "submissions",
                                "run-function",
                                "{{question_id}}"
                            ]
                        },
                        "description": "Run user function code against sample test cases only (JavaScript example)"
                    },
                    "response": []
                },
                {
                    "name": "Run User Function (C++ - Two Sum)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"userFunctionCode\": \"vector<int> twoSum(vector<int>& nums, int target) {\\n    unordered_map<int, int> map;\\n    for (int i = 0; i < nums.size(); i++) {\\n        int complement = target - nums[i];\\n        if (map.find(complement) != map.end()) {\\n            return {map[complement], i};\\n        }\\n        map[nums[i]] = i;\\n    }\\n    return {};\\n}\",\n  \"language\": \"cpp\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/submissions/run-function/{{question_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "submissions",
                                "run-function",
                                "{{question_id}}"
                            ]
                        },
                        "description": "Run user function code against sample test cases only (C++ example)"
                    },
                    "response": []
                },
                {
                    "name": "Run User Function (Java - Two Sum)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"userFunctionCode\": \"public int[] twoSum(int[] nums, int target) {\\n    Map<Integer, Integer> map = new HashMap<>();\\n    for (int i = 0; i < nums.length; i++) {\\n        int complement = target - nums[i];\\n        if (map.containsKey(complement)) {\\n            return new int[]{map.get(complement), i};\\n        }\\n        map.put(nums[i], i);\\n    }\\n    return new int[0];\\n}\",\n  \"language\": \"java\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/submissions/run-function/{{question_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "submissions",
                                "run-function",
                                "{{question_id}}"
                            ]
                        },
                        "description": "Run user function code against sample test cases only (Java example)"
                    },
                    "response": []
                },
                {
                    "name": "Submit User Function (Python - Two Sum)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"userFunctionCode\": \"def twoSum(nums, target):\\n    # Optimized hash map solution\\n    seen = {}\\n    for i, num in enumerate(nums):\\n        complement = target - num\\n        if complement in seen:\\n            return [seen[complement], i]\\n        seen[num] = i\\n    return []\",\n  \"language\": \"python\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/submissions/submit-function/{{question_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "submissions",
                                "submit-function",
                                "{{question_id}}"
                            ]
                        },
                        "description": "Submit user function code against ALL test cases (Python example). This will save the submission and calculate points."
                    },
                    "response": []
                },
                {
                    "name": "Submit User Function (JavaScript - Two Sum)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{auth_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"userFunctionCode\": \"function twoSum(nums, target) {\\n    const map = new Map();\\n    for (let i = 0; i < nums.length; i++) {\\n        const complement = target - nums[i];\\n        if (map.has(complement)) {\\n            return [map.get(complement), i];\\n        }\\n        map.set(nums[i], i);\\n    }\\n    return [];\\n}\",\n  \"language\": \"javascript\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/submissions/submit-function/{{question_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "submissions",
                                "submit-function",
                                "{{question_id}}"
                            ]
                        },
                        "description": "Submit user function code against ALL test cases (JavaScript example). This will save the submission and calculate points."
                    },
                    "response": []
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:3004",
            "type": "string"
        },
        {
            "key": "auth_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "question_id",
            "value": "YOUR_QUESTION_ID_HERE",
            "type": "string"
        }
    ]
}